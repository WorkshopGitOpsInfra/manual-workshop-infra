= Day 2

At this point you have a cluster with an argo instance deployed and cluster admin permissions managed by an argo hub. So you can start configuring day 2 operations.

As we might need to apply this configuration to multiple managed clusters, we need to be able to render multiple applications using helm charts, even though we are applying this configuration
to our single scoped cluster.

Fork this https://github.com/romerobu/helm-infra-gitops-workshop.git[repository] and checkout to your working branch.

[.lines_7]
[.console-input]
[source, shell,subs="+macros,+attributes"]
----
git branch # main
git checkout -b sno-<name>      
----  

Take a look to the code, this repo contains helm charts for configuring day 2 operations in our managed cluster. It contains several dependencies and its charts with some default values 
that you might override by creating your own values.

You can test those charts rendering using this command.

----
helm template . --debug -f values-<chartname>.yaml (optional)  
---- 

You can apply charts, first by creating a single Application that applies charts all-in-one or creating a single Application per chart or kind of configuration to be applied.
Do it on *argocd-infra*, the instance intended for infra management.

If you try to deploy this Application on your cluster you will see it syncs, but it does not render objects as every value is disabled.

[.lines_7]
[.console-input]
[source, shell,subs="+macros,+attributes"]
----
apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: day-2-sno-<name>
  namespace: openshift-gitops
spec:
  destination:
    server: 'https://kubernetes.default.svc'
  project: default
  source:
    helm:
      valueFiles:
        - values.yaml
    path: .
    repoURL: 'https://github.com/<your_user>/helm-infra-gitops-workshop.git'
    targetRevision: sno-<name>
  syncPolicy:
    automated:
      prune: true
      selfHeal: true   
---- 

image::day-2-sno-initial-app.png[]

This is because dependencies include conditions for enabling/disabling those charts. As every value is set to false it does not apply anything.

Then delete this Application.
